{% extends \"admin/admin_base.html\" %}

{% block title %}Gerenciar Promoção - Admin{% endblock %}

{% block head_extra %}
<style>
    .promotion-preview img {
        max-width: 300px;
        max-height: 200px;
        margin-top: 10px;
        border: 1px solid #ddd;
        padding: 5px;
    }
    .form-check-input {
        margin-left: 10px;
    }
</style>
{% endblock %}

{% block admin_content %}
    <h2>Gerenciar Promoção</h2>
    <p>Configure a promoção que será exibida na página inicial. Apenas uma promoção pode estar ativa por vez.</p>

    <form method="POST" action="{{ url_for(\'admin_bp.manage_promotions\') }}" enctype="multipart/form-data">
        
        <div class="form-group form-check">
            <input type="checkbox" class="form-check-input" id="is_active" name="is_active" {% if promotion.is_active %}checked{% endif %}>
            <label class="form-check-label" for="is_active">Ativar Promoção?</label>
        </div>

        <div class="form-group">
            <label for="text">Texto da Promoção (Opcional)</label>
            <textarea id="text" name="text" class="form-control" rows="4">{{ promotion.text or \'\' }}</textarea>
        </div>

        <div class="form-group">
            <label for="image">Imagem da Promoção (Opcional - PNG, JPG, GIF, WebP)</label>
            <input type="file" id="image" name="image" class="form-control-file" accept="image/*">
            
            {% if promotion.image_filename %}
                <div class="promotion-preview">
                    <p>Imagem Atual:</p>
                    <img src="{{ url_for(\'uploaded_files\', filename=promotion.image_filename) }}" alt="Imagem da Promoção Atual">
                    <div class="form-check mt-2">
                        <input type="checkbox" class="form-check-input" id="delete_image" name="delete_image">
                        <label class="form-check-label" for="delete_image">Remover imagem atual?</label>
                    </div>
                </div>
            {% endif %}
        </div>

        <button type="submit" class="btn btn-primary">Salvar Promoção</button>
    </form>

{% endblock %}
